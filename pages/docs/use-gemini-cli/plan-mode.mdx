# 계획 모드 (실험적 기능)

계획 모드(Plan Mode)는 복잡한 변경 사항을 조사하고 설계하기 위한 안전한 읽기 전용 모드입니다.
구현 전략을 조사, 설계 및 계획하는 동안 수정을 방지합니다.

> **참고: 계획 모드는 현재 실험적인 기능입니다.**
>
> 실험적 기능은 변경될 수 있습니다. 계획 모드를 사용하려면 `/settings`를 통해 활성화하거나
> (검색어: `Plan`) `settings.json`에 다음을 추가하세요:
>
> ```json
> {
>   "experimental": {
>     "plan": true
>   }
> }
> ```
>
> 이 기능을 개선하는 데 귀하의 피드백이 매우 중요합니다. 아이디어나 제안 사항이 있거나
> 문제가 발생하는 경우:
>
> - CLI 내에서 `/bug` 명령을 사용하여 문제를 제기하세요.
> - GitHub에서 [이슈를 엽니다](https://github.com/google-gemini/gemini-cli/issues).

- [계획 모드 시작하기](#starting-in-plan-mode)
- [계획 모드 사용 방법](#how-to-use-plan-mode)
  - [계획 모드 진입](#entering-plan-mode)
  - [계획 워크플로](#the-planning-workflow)
  - [계획 모드 종료](#exiting-plan-mode)
- [도구 제한 사항](#tool-restrictions)

## 계획 모드 시작하기

Gemini CLI가 기본적으로 계획 모드에서 직접 시작되도록 구성할 수 있습니다:

1.  CLI에서 `/settings`를 입력합니다.
2.  `Default Approval Mode`를 검색합니다.
3.  값을 `Plan`으로 설정합니다.

계획 모드에서 시작하는 다른 방법:

- **CLI 플래그:** `gemini --approval-mode=plan`
- **수동 설정:** `settings.json`을 수동으로 업데이트합니다:

  ```json
  {
    "general": {
      "defaultApprovalMode": "plan"
    }
  }
  ```

## 계획 모드 사용 방법

### 계획 모드 진입

세 가지 방법으로 계획 모드에 진입할 수 있습니다:

1.  **키보드 단축키:** `Shift+Tab`을 눌러 승인 모드를 순환합니다
    (`Default` -> `Plan` -> `Auto-Edit`).
2.  **명령:** 입력 상자에 `/plan`을 입력합니다.
3.  **자연어:** 에이전트에게 "...에 대한 계획을 시작해 줘"라고 요청합니다.

### 계획 워크플로

1.  **요구사항:** 에이전트는 `ask_user`를 사용하여 목표를 명확히 합니다.
2.  **탐색:** 에이전트는 읽기 전용 도구(예: [`read_file`])를 사용하여 코드베이스를
    매핑하고 가정을 검증합니다.
3.  **설계:** 에이전트는 선택할 수 있는 권장 솔루션과 함께 대안을 제안합니다.
4.  **계획:** 상세 계획이 임시 Markdown 파일에 기록됩니다.
5.  **검토:** 계획을 검토합니다.
    - **승인:** 계획 모드를 종료하고 구현을 시작합니다 (자동 편집 또는 기본 승인
      모드로 전환).
    - **반복:** 계획을 구체화하기 위해 피드백을 제공합니다.

### 계획 모드 종료

계획 모드를 종료하려면:

1. **키보드 단축키:** `Shift+Tab`을 눌러 원하는 모드로 순환합니다.
2. **도구:** 에이전트는 승인을 위해 최종 계획을 제시하기 위해 `exit_plan_mode`
   도구를 호출합니다.

## 도구 제한 사항

계획 모드는 우발적인 변경을 방지하기 위해 엄격한 안전 정책을 적용합니다.

허용되는 도구는 다음과 같습니다:

- **파일 시스템 (읽기):** [`read_file`], [`list_directory`], [`glob`]
- **검색:** [`grep_search`], [`google_web_search`]
- **상호 작용:** `ask_user`
- **MCP 도구 (읽기):** 읽기 전용 [MCP tools] (예: `github_read_issue`,
  `postgres_read_schema`)는 허용됩니다.
- **계획 (쓰기):** [`write_file`] 및 [`replace`]는 `~/.gemini/tmp/<project>/plans/`
  디렉토리의 `.md` 파일에 대해서만 허용됩니다.

[`list_directory`]: /docs/tools/file-system.md#1-list_directory-readfolder
[`read_file`]: /docs/tools/file-system.md#2-read_file-readfile
[`grep_search`]: /docs/tools/file-system.md#5-grep_search-searchtext
[`write_file`]: /docs/tools/file-system.md#3-write_file-writefile
[`glob`]: /docs/tools/file-system.md#4-glob-findfiles
[`google_web_search`]: /docs/tools/web-search.md
[`replace`]: /docs/tools/file-system.md#6-replace-edit
[MCP tools]: /docs/tools/mcp-server.md
