# 세션 관리

Gemini CLI에는 대화 내역을 자동으로 저장하는 강력한 세션 관리 기능이 포함되어 있습니다.
이를 통해 작업을 중단하고 정확히 중단한 지점에서 다시 시작하거나, 과거 상호 작용을 검토하거나,
대화 기록을 효과적으로 관리할 수 있습니다.

## 자동 저장

Gemini CLI와 상호 작용할 때마다 세션이 자동으로 저장됩니다.
이것은 수동 개입 없이 백그라운드에서 발생합니다.

- **저장되는 내용:** 다음을 포함한 전체 대화 내역:
  - 프롬프트와 모델의 응답.
  - 모든 도구 실행(입력 및 출력).
  - 토큰 사용 통계(입력/출력/캐시 등).
  - 에이전트 생각/추론 요약(사용 가능한 경우).
- **위치:** 세션은 `~/.gemini/tmp/<project_hash>/chats/`에 저장됩니다.
- **범위:** 세션은 프로젝트별로 저장됩니다. 다른 프로젝트로 디렉토리를 전환하면
  해당 프로젝트의 세션 기록으로 전환됩니다.

## 세션 재개

이전 세션을 재개하여 이전 컨텍스트가 복원된 상태로 대화를 계속할 수 있습니다.

### 명령줄에서

CLI를 시작할 때 `--resume` (또는 `-r`) 플래그를 사용할 수 있습니다:

- **최신 세션 재개:**

  ```bash
  gemini --resume
  ```

  가장 최근 세션을 즉시 로드합니다.

- **인덱스로 재개:** 먼저 사용 가능한 세션을 나열한 다음 ([세션 나열](#listing-sessions) 참조), 인덱스 번호를 사용하세요:

  ```bash
  gemini --resume 1
  ```

- **ID로 재개:** 전체 세션 UUID를 제공할 수도 있습니다:
  ```bash
  gemini --resume a1b2c3d4-e5f6-7890-abcd-ef1234567890
  ```

### 대화형 인터페이스에서

CLI가 실행되는 동안 `/resume` 슬래시 명령을 사용하여 **세션 브라우저**를
열 수 있습니다:

```text
/resume
```

그러면 다음과 같은 대화형 인터페이스가 열립니다:

- **탐색:** 과거 세션 목록을 스크롤합니다.
- **미리보기:** 세션 날짜, 메시지 수, 첫 번째 사용자 프롬프트와 같은 세부 정보를 봅니다.
- **검색:** `/`를 눌러 검색 모드로 들어가서 ID나 내용으로 세션을 필터링합니다.
- **선택:** `Enter`를 눌러 선택한 세션을 재개합니다.

## 세션 관리

### 세션 나열

명령줄에서 현재 프로젝트에 대해 사용 가능한 모든 세션 목록을 보려면:

```bash
gemini --list-sessions
```

출력 예시:

```text
Available sessions for this project (3):

  1. Fix bug in auth (2 days ago) [a1b2c3d4]
  2. Refactor database schema (5 hours ago) [e5f67890]
  3. Update documentation (Just now) [abcd1234]
```

### 세션 삭제

오래되거나 원치 않는 세션을 제거하여 공간을 확보하거나 기록을 정리할 수 있습니다.

**명령줄:** 인덱스 또는 ID와 함께 `--delete-session` 플래그를 사용하세요:

```bash
gemini --delete-session 2
```

**From the Session Browser:**

1.  Open the browser with `/resume`.
2.  Navigate to the session you want to remove.
3.  Press `x`.

## Configuration

You can configure how Gemini CLI manages your session history in your
`settings.json` file.

### Session Retention

To prevent your history from growing indefinitely, you can enable automatic
cleanup policies.

```json
{
  "general": {
    "sessionRetention": {
      "enabled": true,
      "maxAge": "30d", // Keep sessions for 30 days
      "maxCount": 50 // Keep the 50 most recent sessions
    }
  }
}
```

- **`enabled`**: (boolean) Master switch for session cleanup. Default is
  `false`.
- **`maxAge`**: (string) Duration to keep sessions (e.g., "24h", "7d", "4w").
  Sessions older than this will be deleted.
- **`maxCount`**: (number) Maximum number of sessions to retain. The oldest
  sessions exceeding this count will be deleted.
- **`minRetention`**: (string) Minimum retention period (safety limit). Defaults
  to `"1d"`; sessions newer than this period are never deleted by automatic
  cleanup.

### Session Limits

You can also limit the length of individual sessions to prevent context windows
from becoming too large and expensive.

```json
{
  "model": {
    "maxSessionTurns": 100
  }
}
```

- **`maxSessionTurns`**: (number) The maximum number of turns (user + model
  exchanges) allowed in a single session. Set to `-1` for unlimited (default).

  **Behavior when limit is reached:**
  - **Interactive Mode:** The CLI shows an informational message and stops
    sending requests to the model. You must manually start a new session.
  - **Non-Interactive Mode:** The CLI exits with an error.
