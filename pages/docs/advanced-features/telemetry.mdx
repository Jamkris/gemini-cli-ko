# OpenTelemetryë¥¼ í†µí•œ ê´€ì°° ê°€ëŠ¥ì„±

Gemini CLIì—ì„œ OpenTelemetryë¥¼ í™œì„±í™”í•˜ê³  ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì„¸ìš”.

- [OpenTelemetryë¥¼ í†µí•œ ê´€ì°° ê°€ëŠ¥ì„±](#observability-with-opentelemetry)
  - [ì£¼ìš” ì´ì ](#key-benefits)
  - [OpenTelemetry í†µí•©](#opentelemetry-integration)
  - [êµ¬ì„±](#configuration)
  - [Google Cloud í…”ë ˆë©”íŠ¸ë¦¬](#google-cloud-telemetry)
    - [ì „ì œ ì¡°ê±´](#prerequisites)
    - [CLI ìê²© ì¦ëª…ìœ¼ë¡œ ì¸ì¦í•˜ê¸°](#authenticating-with-cli-credentials)
    - [ì§ì ‘ ë‚´ë³´ë‚´ê¸° (ê¶Œì¥)](#direct-export-recommended)
    - [ìˆ˜ì§‘ê¸° ê¸°ë°˜ ë‚´ë³´ë‚´ê¸° (ê³ ê¸‰)](#collector-based-export-advanced)
    - [ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ](#monitoring-dashboards)
  - [ë¡œì»¬ í…”ë ˆë©”íŠ¸ë¦¬](#local-telemetry)
    - [íŒŒì¼ ê¸°ë°˜ ì¶œë ¥ (ê¶Œì¥)](#file-based-output-recommended)
    - [ìˆ˜ì§‘ê¸° ê¸°ë°˜ ë‚´ë³´ë‚´ê¸° (ê³ ê¸‰)](#collector-based-export-advanced-1)
  - [ë¡œê·¸ ë° ë©”íŠ¸ë¦­](#logs-and-metrics)
    - [ë¡œê·¸](#logs)
      - [ì„¸ì…˜](#sessions)
      - [ìŠ¹ì¸ ëª¨ë“œ](#approval-mode)
      - [ë„êµ¬](#tools)
      - [íŒŒì¼](#files)
      - [API](#api)
      - [ëª¨ë¸ ë¼ìš°íŒ…](#model-routing)
      - [ì±„íŒ… ë° ìŠ¤íŠ¸ë¦¬ë°](#chat-and-streaming)
      - [ë³µì›ë ¥](#resilience)
      - [í™•ì¥](#extensions)
      - [ì—ì´ì „íŠ¸ ì‹¤í–‰](#agent-runs)
      - [IDE](#ide)
      - [UI](#ui)
    - [ë©”íŠ¸ë¦­](#metrics)
      - [ì‚¬ìš©ì ì§€ì •](#custom)
        - [ì„¸ì…˜](#sessions-1)
        - [ë„êµ¬](#tools-1)
        - [API](#api-1)
        - [í† í° ì‚¬ìš©ëŸ‰](#token-usage)
        - [íŒŒì¼](#files-1)
        - [ì±„íŒ… ë° ìŠ¤íŠ¸ë¦¬ë°](#chat-and-streaming-1)
        - [ëª¨ë¸ ë¼ìš°íŒ…](#model-routing-1)
        - [ì—ì´ì „íŠ¸ ì‹¤í–‰](#agent-runs-1)
        - [UI](#ui-1)
        - [ì„±ëŠ¥](#performance)
      - [GenAI ì˜ë¯¸ ê·œì¹™](#genai-semantic-convention)

## ì£¼ìš” ì´ì 

- **ğŸ” ì‚¬ìš©ëŸ‰ ë¶„ì„**: íŒ€ ì „ì²´ì˜ ìƒí˜¸ ì‘ìš© íŒ¨í„´ ë° ê¸°ëŠ¥ ì±„íƒ ì´í•´
- **âš¡ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§**: ì‘ë‹µ ì‹œê°„, í† í° ì†Œë¹„ ë° ë¦¬ì†ŒìŠ¤ í™œìš©ë¥  ì¶”ì 
- **ğŸ› ì‹¤ì‹œê°„ ë””ë²„ê¹…**: ë³‘ëª© í˜„ìƒ, ì‹¤íŒ¨ ë° ì˜¤ë¥˜ íŒ¨í„´ ë°œìƒ ì¦‰ì‹œ ì‹ë³„
- **ğŸ“Š ì›Œí¬í”Œë¡œ ìµœì í™”**: êµ¬ì„± ë° í”„ë¡œì„¸ìŠ¤ ê°œì„ ì„ ìœ„í•œ ì •ë³´ì— ì…ê°í•œ ì˜ì‚¬ ê²°ì •
- **ğŸ¢ ì—”í„°í”„ë¼ì´ì¦ˆ ê±°ë²„ë„ŒìŠ¤**: íŒ€ ê°„ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§, ë¹„ìš© ì¶”ì , ê·œì • ì¤€ìˆ˜ ë³´ì¥ ë° ê¸°ì¡´ ëª¨ë‹ˆí„°ë§ ì¸í”„ë¼ì™€ì˜ í†µí•©

## OpenTelemetry í†µí•©

ê³µê¸‰ì—…ì²´ ì¤‘ë¦½ì ì¸ ì‚°ì—… í‘œì¤€ ê´€ì°° ê°€ëŠ¥ì„± í”„ë ˆì„ì›Œí¬ì¸ **[OpenTelemetry]**ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬ì¶•ëœ
Gemini CLIì˜ ê´€ì°° ê°€ëŠ¥ì„± ì‹œìŠ¤í…œì€ ë‹¤ìŒì„ ì œê³µí•©ë‹ˆë‹¤:

- **ë²”ìš© í˜¸í™˜ì„±**: ëª¨ë“  OpenTelemetry ë°±ì—”ë“œ(Google Cloud, Jaeger, Prometheus,
  Datadog ë“±)ë¡œ ë‚´ë³´ë‚´ê¸°
- **í‘œì¤€í™”ëœ ë°ì´í„°**: íˆ´ì²´ì¸ ì „ë°˜ì—ì„œ ì¼ê´€ëœ í˜•ì‹ ë° ìˆ˜ì§‘ ë°©ë²• ì‚¬ìš©
- **ë¯¸ë˜ ì§€í–¥ì  í†µí•©**: ê¸°ì¡´ ë° ë¯¸ë˜ì˜ ê´€ì°° ê°€ëŠ¥ì„± ì¸í”„ë¼ì™€ ì—°ê²°
- **ê³µê¸‰ì—…ì²´ ì¢…ì†ì„± ì—†ìŒ**: ê³„ì¸¡ì„ ë³€ê²½í•˜ì§€ ì•Šê³  ë°±ì—”ë“œ ê°„ ì „í™˜

[OpenTelemetry]: https://opentelemetry.io/

## êµ¬ì„±

ëª¨ë“  í…”ë ˆë©”íŠ¸ë¦¬ ë™ì‘ì€ `.gemini/settings.json` íŒŒì¼ì„ í†µí•´ ì œì–´ë©ë‹ˆë‹¤. í™˜ê²½ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬
íŒŒì¼ì˜ ì„¤ì •ì„ ì¬ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

| ì„¤ì •           | í™˜ê²½ ë³€ìˆ˜                        | ì„¤ëª…                                            | ê°’                | ê¸°ë³¸ê°’                  |
| -------------- | -------------------------------- | ----------------------------------------------- | ----------------- | ----------------------- |
| `enabled`      | `GEMINI_TELEMETRY_ENABLED`       | í…”ë ˆë©”íŠ¸ë¦¬ í™œì„±í™” ë˜ëŠ” ë¹„í™œì„±í™”                 | `true`/`false`    | `false`                 |
| `target`       | `GEMINI_TELEMETRY_TARGET`        | í…”ë ˆë©”íŠ¸ë¦¬ ë°ì´í„°ë¥¼ ë³´ë‚¼ ìœ„ì¹˜                   | `"gcp"`/`"local"` | `"local"`               |
| `otlpEndpoint` | `GEMINI_TELEMETRY_OTLP_ENDPOINT` | OTLP ìˆ˜ì§‘ê¸° ì—”ë“œí¬ì¸íŠ¸                          | URL ë¬¸ìì—´        | `http://localhost:4317` |
| `otlpProtocol` | `GEMINI_TELEMETRY_OTLP_PROTOCOL` | OTLP ì „ì†¡ í”„ë¡œí† ì½œ                              | `"grpc"`/`"http"` | `"grpc"`                |
| `outfile`      | `GEMINI_TELEMETRY_OUTFILE`       | íŒŒì¼ì— í…”ë ˆë©”íŠ¸ë¦¬ ì €ì¥ (`otlpEndpoint` ì¬ì •ì˜)  | íŒŒì¼ ê²½ë¡œ         | -                       |
| `logPrompts`   | `GEMINI_TELEMETRY_LOG_PROMPTS`   | í…”ë ˆë©”íŠ¸ë¦¬ ë¡œê·¸ì— í”„ë¡¬í”„íŠ¸ í¬í•¨                 | `true`/`false`    | `true`                  |
| `useCollector` | `GEMINI_TELEMETRY_USE_COLLECTOR` | ì™¸ë¶€ OTLP ìˆ˜ì§‘ê¸° ì‚¬ìš© (ê³ ê¸‰)                    | `true`/`false`    | `false`                 |
| `useCliAuth`   | `GEMINI_TELEMETRY_USE_CLI_AUTH`  | í…”ë ˆë©”íŠ¸ë¦¬ì— CLI ìê²© ì¦ëª… ì‚¬ìš© (GCP ëŒ€ìƒ ì „ìš©) | `true`/`false`    | `false`                 |

**ë¶€ìš¸ í™˜ê²½ ë³€ìˆ˜ì— ëŒ€í•œ ì°¸ê³  ì‚¬í•­:** ë¶€ìš¸ ì„¤ì •(`enabled`, `logPrompts`,
`useCollector`)ì˜ ê²½ìš° í•´ë‹¹ í™˜ê²½ ë³€ìˆ˜ë¥¼ `true` ë˜ëŠ” `1`ë¡œ ì„¤ì •í•˜ë©´ ê¸°ëŠ¥ì´ í™œì„±í™”ë©ë‹ˆë‹¤.
ê·¸ ì™¸ì˜ ê°’ì€ ê¸°ëŠ¥ì„ ë¹„í™œì„±í™”í•©ë‹ˆë‹¤.

ëª¨ë“  êµ¬ì„± ì˜µì…˜ì— ëŒ€í•œ ìì„¸í•œ ì •ë³´ëŠ” [êµ¬ì„± ê°€ì´ë“œ](/docs/get-started/configuration)ë¥¼
ì°¸ì¡°í•˜ì„¸ìš”.

## Google Cloud í…”ë ˆë©”íŠ¸ë¦¬

### ì „ì œ ì¡°ê±´

ì•„ë˜ ë°©ë²• ì¤‘ í•˜ë‚˜ë¥¼ ì‚¬ìš©í•˜ê¸° ì „ì— ë‹¤ìŒ ë‹¨ê³„ë¥¼ ì™„ë£Œí•˜ì„¸ìš”:

1. Google Cloud í”„ë¡œì íŠ¸ ID ì„¤ì •:
   - ì¶”ë¡ ê³¼ ë³„ë„ì˜ í”„ë¡œì íŠ¸ì—ì„œ í…”ë ˆë©”íŠ¸ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°:
     ```bash
     export OTLP_GOOGLE_CLOUD_PROJECT="your-telemetry-project-id"
     ```
   - ì¶”ë¡ ê³¼ ë™ì¼í•œ í”„ë¡œì íŠ¸ì—ì„œ í…”ë ˆë©”íŠ¸ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°:
     ```bash
     export GOOGLE_CLOUD_PROJECT="your-project-id"
     ```

2. Google Cloud ì¸ì¦:
   - ì‚¬ìš©ì ê³„ì •ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°:
     ```bash
     gcloud auth application-default login
     ```
   - ì„œë¹„ìŠ¤ ê³„ì •ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°:
     ```bash
     export GOOGLE_APPLICATION_CREDENTIALS="/path/to/your/service-account.json"
     ```
3. ê³„ì • ë˜ëŠ” ì„œë¹„ìŠ¤ ê³„ì •ì— ë‹¤ìŒ IAM ì—­í• ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:
   - Cloud Trace Agent (Cloud Trace ì—ì´ì „íŠ¸)
   - Monitoring Metric Writer (ëª¨ë‹ˆí„°ë§ ë©”íŠ¸ë¦­ ì‘ì„±ì)
   - Logs Writer (ë¡œê·¸ ì‘ì„±ì)

4. í•„ìš”í•œ Google Cloud API í™œì„±í™” (ì•„ì§ í™œì„±í™”ë˜ì§€ ì•Šì€ ê²½ìš°):
   ```bash
   gcloud services enable \
     cloudtrace.googleapis.com \
     monitoring.googleapis.com \
     logging.googleapis.com \
     --project="$OTLP_GOOGLE_CLOUD_PROJECT"
   ```

### CLI ìê²© ì¦ëª…ìœ¼ë¡œ ì¸ì¦í•˜ê¸°

ê¸°ë³¸ì ìœ¼ë¡œ Google Cloudìš© í…”ë ˆë©”íŠ¸ë¦¬ ìˆ˜ì§‘ê¸°ëŠ” ADC(ì• í”Œë¦¬ì¼€ì´ì…˜ ê¸°ë³¸ ìê²© ì¦ëª…)ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
ê·¸ëŸ¬ë‚˜ Gemini CLIì— ë¡œê·¸ì¸í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ê²ƒê³¼ ë™ì¼í•œ OAuth ìê²© ì¦ëª…ì„ ì‚¬ìš©í•˜ë„ë¡ êµ¬ì„±í•  ìˆ˜
ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ADCê°€ ì„¤ì •ë˜ì§€ ì•Šì€ í™˜ê²½ì—ì„œ ìœ ìš©í•©ë‹ˆë‹¤.

ì´ë¥¼ í™œì„±í™”í•˜ë ¤ë©´ `telemetry` ì„¤ì •ì—ì„œ `useCliAuth` ì†ì„±ì„ `true`ë¡œ ì„¤ì •í•˜ì„¸ìš”:

```json
{
  "telemetry": {
    "enabled": true,
    "target": "gcp",
    "useCliAuth": true
  }
}
```

**ì¤‘ìš”:**

- ì´ ì„¤ì •ì€ **ì§ì ‘ ë‚´ë³´ë‚´ê¸°** (in-process exporters)ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
- `useCollector: true`ì™€ í•¨ê»˜ **ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤**. ë‘˜ ë‹¤ í™œì„±í™”í•˜ë©´ í…”ë ˆë©”íŠ¸ë¦¬ê°€
  ë¹„í™œì„±í™”ë˜ê³  ì˜¤ë¥˜ê°€ ê¸°ë¡ë©ë‹ˆë‹¤.
- CLIëŠ” ìë™ìœ¼ë¡œ ìê²© ì¦ëª…ì„ ì‚¬ìš©í•˜ì—¬ Google Cloud Trace, Metrics ë° Logging APIì—
  ì¸ì¦í•©ë‹ˆë‹¤.

### ì§ì ‘ ë‚´ë³´ë‚´ê¸° (ê¶Œì¥)

í…”ë ˆë©”íŠ¸ë¦¬ë¥¼ Google Cloud ì„œë¹„ìŠ¤ë¡œ ì§ì ‘ ë³´ëƒ…ë‹ˆë‹¤. ìˆ˜ì§‘ê¸°ê°€ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

1. `.gemini/settings.json`ì—ì„œ í…”ë ˆë©”íŠ¸ë¦¬ í™œì„±í™”:
   ```json
   {
     "telemetry": {
       "enabled": true,
       "target": "gcp"
     }
   }
   ```
2. Gemini CLIë¥¼ ì‹¤í–‰í•˜ê³  í”„ë¡¬í”„íŠ¸ë¥¼ ë³´ëƒ…ë‹ˆë‹¤.
3. ë¡œê·¸ ë° ë©”íŠ¸ë¦­ ë³´ê¸°:
   - í”„ë¡¬í”„íŠ¸ë¥¼ ë³´ë‚¸ í›„ ë¸Œë¼ìš°ì €ì—ì„œ Google Cloud Consoleì„ ì—½ë‹ˆë‹¤:
     - ë¡œê·¸: https://console.cloud.google.com/logs/
     - ë©”íŠ¸ë¦­: https://console.cloud.google.com/monitoring/metrics-explorer
     - ì¶”ì : https://console.cloud.google.com/traces/list

### ìˆ˜ì§‘ê¸° ê¸°ë°˜ ë‚´ë³´ë‚´ê¸° (ê³ ê¸‰)

ì‚¬ìš©ì ì§€ì • ì²˜ë¦¬, í•„í„°ë§ ë˜ëŠ” ë¼ìš°íŒ…ì„ ìœ„í•´ OpenTelemetry ìˆ˜ì§‘ê¸°ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼
Google Cloudë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.

1. `.gemini/settings.json` êµ¬ì„±:
   ```json
   {
     "telemetry": {
       "enabled": true,
       "target": "gcp",
       "useCollector": true
     }
   }
   ```
2. ìë™í™” ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰:
   ```bash
   npm run telemetry -- --target=gcp
   ```
   ì´ ì‘ì—…ì€ ë‹¤ìŒì„ ìˆ˜í–‰í•©ë‹ˆë‹¤:
   - Google Cloudë¡œ ì „ë‹¬í•˜ëŠ” ë¡œì»¬ OTEL ìˆ˜ì§‘ê¸° ì‹œì‘
   - ì‘ì—… ê³µê°„ êµ¬ì„±
   - Google Cloud Consoleì—ì„œ ì¶”ì , ë©”íŠ¸ë¦­ ë° ë¡œê·¸ë¥¼ ë³¼ ìˆ˜ ìˆëŠ” ë§í¬ ì œê³µ
   - ìˆ˜ì§‘ê¸° ë¡œê·¸ë¥¼ `~/.gemini/tmp/<projectHash>/otel/collector-gcp.log`ì— ì €ì¥
   - ì¢…ë£Œ ì‹œ ìˆ˜ì§‘ê¸° ì¤‘ì§€ (ì˜ˆ: `Ctrl+C`)
3. Gemini CLIë¥¼ ì‹¤í–‰í•˜ê³  í”„ë¡¬í”„íŠ¸ë¥¼ ë³´ëƒ…ë‹ˆë‹¤.
4. ë¡œê·¸ ë° ë©”íŠ¸ë¦­ ë³´ê¸°:
   - í”„ë¡¬í”„íŠ¸ë¥¼ ë³´ë‚¸ í›„ ë¸Œë¼ìš°ì €ì—ì„œ Google Cloud Consoleì„ ì—½ë‹ˆë‹¤:
     - ë¡œê·¸: https://console.cloud.google.com/logs/
     - ë©”íŠ¸ë¦­: https://console.cloud.google.com/monitoring/metrics-explorer
     - ì¶”ì : https://console.cloud.google.com/traces/list
   - `~/.gemini/tmp/<projectHash>/otel/collector-gcp.log`ë¥¼ ì—´ì–´ ë¡œì»¬ ìˆ˜ì§‘ê¸° ë¡œê·¸ í™•ì¸.

### ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ

Gemini CLIëŠ” í…”ë ˆë©”íŠ¸ë¦¬ë¥¼ ì‹œê°í™”í•˜ê¸° ìœ„í•´ ë¯¸ë¦¬ êµ¬ì„±ëœ
[Google Cloud Monitoring](https://cloud.google.com/monitoring) ëŒ€ì‹œë³´ë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.

ì´ ëŒ€ì‹œë³´ë“œëŠ” **Google Cloud Monitoring ëŒ€ì‹œë³´ë“œ í…œí”Œë¦¿**ì—ì„œ "**Gemini CLI Monitoring**"ìœ¼ë¡œ
ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![Gemini CLI Monitoring Dashboard Overview](/docs/assets/monitoring-dashboard-overview.png)

![Gemini CLI Monitoring Dashboard Metrics](/docs/assets/monitoring-dashboard-metrics.png)

![Gemini CLI Monitoring Dashboard Logs](/docs/assets/monitoring-dashboard-logs.png)

ìì„¸í•œ ë‚´ìš©ì€ ë¸”ë¡œê·¸ ê²Œì‹œë¬¼ì„ í™•ì¸í•˜ì„¸ìš”:
[ì¦‰ê°ì ì¸ í†µì°°ë ¥: Gemini CLIì˜ ìƒˆë¡œìš´ ì‚¬ì „ êµ¬ì„±ëœ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ](https://cloud.google.com/blog/topics/developers-practitioners/instant-insights-gemini-clis-new-pre-configured-monitoring-dashboards/).

## ë¡œì»¬ í…”ë ˆë©”íŠ¸ë¦¬

ë¡œì»¬ ê°œë°œ ë° ë””ë²„ê¹…ì„ ìœ„í•´ ë¡œì»¬ì—ì„œ í…”ë ˆë©”íŠ¸ë¦¬ ë°ì´í„°ë¥¼ ìº¡ì²˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

### íŒŒì¼ ê¸°ë°˜ ì¶œë ¥ (ê¶Œì¥)

1. `.gemini/settings.json`ì—ì„œ í…”ë ˆë©”íŠ¸ë¦¬ í™œì„±í™”:
   ```json
   {
     "telemetry": {
       "enabled": true,
       "target": "local",
       "otlpEndpoint": "",
       "outfile": ".gemini/telemetry.log"
     }
   }
   ```
2. Gemini CLIë¥¼ ì‹¤í–‰í•˜ê³  í”„ë¡¬í”„íŠ¸ë¥¼ ë³´ëƒ…ë‹ˆë‹¤.
3. ì§€ì •ëœ íŒŒì¼(ì˜ˆ: `.gemini/telemetry.log`)ì—ì„œ ë¡œê·¸ ë° ë©”íŠ¸ë¦­ì„ í™•ì¸í•©ë‹ˆë‹¤.

### ìˆ˜ì§‘ê¸° ê¸°ë°˜ ë‚´ë³´ë‚´ê¸° (ê³ ê¸‰)

1. ìë™í™” ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰:
   ```bash
   npm run telemetry -- --target=local
   ```
   ì´ ì‘ì—…ì€ ë‹¤ìŒì„ ìˆ˜í–‰í•©ë‹ˆë‹¤:
   - Jaeger ë° OTEL ìˆ˜ì§‘ê¸° ë‹¤ìš´ë¡œë“œ ë° ì‹œì‘
   - ë¡œì»¬ í…”ë ˆë©”íŠ¸ë¦¬ë¥¼ ìœ„í•œ ì‘ì—… ê³µê°„ êµ¬ì„±
   - http://localhost:16686 ì—ì„œ Jaeger UI ì œê³µ
   - ë¡œê·¸/ë©”íŠ¸ë¦­ì„ `~/.gemini/tmp/<projectHash>/otel/collector.log`ì— ì €ì¥
   - ì¢…ë£Œ ì‹œ ìˆ˜ì§‘ê¸° ì¤‘ì§€ (ì˜ˆ: `Ctrl+C`)
2. Gemini CLIë¥¼ ì‹¤í–‰í•˜ê³  í”„ë¡¬í”„íŠ¸ë¥¼ ë³´ëƒ…ë‹ˆë‹¤.
3. http://localhost:16686 ì—ì„œ ì¶”ì ì„ í™•ì¸í•˜ê³  ìˆ˜ì§‘ê¸° ë¡œê·¸ íŒŒì¼ì—ì„œ ë¡œê·¸/ë©”íŠ¸ë¦­ì„
   í™•ì¸í•©ë‹ˆë‹¤.

## ë¡œê·¸ ë° ë©”íŠ¸ë¦­

ë‹¤ìŒ ì„¹ì…˜ì—ì„œëŠ” Gemini CLIì— ëŒ€í•´ ìƒì„±ëœ ë¡œê·¸ ë° ë©”íŠ¸ë¦­ì˜ êµ¬ì¡°ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.

`session.id`, `installation.id`, ë° `user.email`(Google ê³„ì •ìœ¼ë¡œ ì¸ì¦ëœ ê²½ìš°ì—ë§Œ
ì‚¬ìš© ê°€ëŠ¥)ì€ ëª¨ë“  ë¡œê·¸ ë° ë©”íŠ¸ë¦­ì— ê³µí†µ ì†ì„±ìœ¼ë¡œ í¬í•¨ë©ë‹ˆë‹¤.

### ë¡œê·¸

ë¡œê·¸ëŠ” íŠ¹ì • ì´ë²¤íŠ¸ì˜ íƒ€ì„ìŠ¤íƒ¬í”„ê°€ ìˆëŠ” ê¸°ë¡ì…ë‹ˆë‹¤. Gemini CLIì— ëŒ€í•´ ë‹¤ìŒ ì´ë²¤íŠ¸ê°€ ê¸°ë¡ë˜ë©°,
ë²”ì£¼ë³„ë¡œ ê·¸ë£¹í™”ë©ë‹ˆë‹¤.

#### ì„¸ì…˜

ì‹œì‘ êµ¬ì„± ë° ì‚¬ìš©ì í”„ë¡¬í”„íŠ¸ ì œì¶œì„ ìº¡ì²˜í•©ë‹ˆë‹¤.

- `gemini_cli.config`: CLI êµ¬ì„±ê³¼ í•¨ê»˜ ì‹œì‘ ì‹œ í•œ ë²ˆ ë°©ì¶œë©ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `model` (string)
    - `embedding_model` (string)
    - `sandbox_enabled` (boolean)
    - `core_tools_enabled` (string)
    - `approval_mode` (string)
    - `api_key_enabled` (boolean)
    - `vertex_ai_enabled` (boolean)
    - `log_user_prompts_enabled` (boolean)
    - `file_filtering_respect_git_ignore` (boolean)
    - `debug_mode` (boolean)
    - `mcp_servers` (string)
    - `mcp_servers_count` (int)
    - `extensions` (string)
    - `extension_ids` (string)
    - `extension_count` (int)
    - `mcp_tools` (string, í•´ë‹¹ë˜ëŠ” ê²½ìš°)
    - `mcp_tools_count` (int, í•´ë‹¹ë˜ëŠ” ê²½ìš°)
    - `output_format` ("text", "json", ë˜ëŠ” "stream-json")

- `gemini_cli.user_prompt`: ì‚¬ìš©ìê°€ í”„ë¡¬í”„íŠ¸ë¥¼ ì œì¶œí•  ë•Œ ë°©ì¶œë©ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `prompt_length` (int)
    - `prompt_id` (string)
    - `prompt` (string; `telemetry.logPrompts`ê°€ `false`ì¸ ê²½ìš° ì œì™¸ë¨)
    - `auth_type` (string)

#### ìŠ¹ì¸ ëª¨ë“œ

ìŠ¹ì¸ ëª¨ë“œì˜ ë³€ê²½ ë° ê¸°ê°„ì„ ì¶”ì í•©ë‹ˆë‹¤.

##### ìˆ˜ëª… ì£¼ê¸°

- `approval_mode_switch`: ìŠ¹ì¸ ëª¨ë“œê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.
  - **ì†ì„±**:
    - `from_mode` (string)
    - `to_mode` (string)

- `approval_mode_duration`: ìŠ¹ì¸ ëª¨ë“œì—ì„œ ë³´ë‚¸ ì‹œê°„ì…ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `mode` (string)
    - `duration_ms` (int)

##### ì‹¤í–‰

ì´ ì´ë²¤íŠ¸ëŠ” ê³„íš ëª¨ë“œì™€ ê°™ì€ ìŠ¹ì¸ ëª¨ë“œì˜ ì‹¤í–‰ì„ ì¶”ì í•©ë‹ˆë‹¤.

- `plan_execution`: ê³„íšì´ ì‹¤í–‰ë˜ì—ˆê³  ì„¸ì…˜ì´ ê³„íš ëª¨ë“œì—ì„œ í™œì„± ì‹¤í–‰ìœ¼ë¡œ ì „í™˜ë˜ì—ˆìŠµë‹ˆë‹¤.
  - **ì†ì„±**:
    - `approval_mode` (string)

#### ë„êµ¬

ë„êµ¬ ì‹¤í–‰, ì¶œë ¥ ì˜ë¦¼ ë° í¸ì§‘ ë™ì‘ì„ ìº¡ì²˜í•©ë‹ˆë‹¤.

- `gemini_cli.tool_call`: ê° ë„êµ¬(í•¨ìˆ˜) í˜¸ì¶œì— ëŒ€í•´ ë°©ì¶œë©ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `function_name`
    - `function_args`
    - `duration_ms`
    - `success` (boolean)
    - `decision` ("accept", "reject", "auto_accept", ë˜ëŠ” "modify", í•´ë‹¹ë˜ëŠ”
      ê²½ìš°)
    - `error` (í•´ë‹¹ë˜ëŠ” ê²½ìš°)
    - `error_type` (í•´ë‹¹ë˜ëŠ” ê²½ìš°)
    - `prompt_id` (string)
    - `tool_type` ("native" ë˜ëŠ” "mcp")
    - `mcp_server_name` (string, í•´ë‹¹ë˜ëŠ” ê²½ìš°)
    - `extension_name` (string, í•´ë‹¹ë˜ëŠ” ê²½ìš°)
    - `extension_id` (string, í•´ë‹¹ë˜ëŠ” ê²½ìš°)
    - `content_length` (int, í•´ë‹¹ë˜ëŠ” ê²½ìš°)
    - `metadata` (í•´ë‹¹ë˜ëŠ” ê²½ìš°)

- `gemini_cli.tool_output_truncated`: ë„êµ¬ í˜¸ì¶œì˜ ì¶œë ¥ì´ ì˜ë ¸ìŠµë‹ˆë‹¤.
  - **ì†ì„±**:
    - `tool_name` (string)
    - `original_content_length` (int)
    - `truncated_content_length` (int)
    - `threshold` (int)
    - `lines` (int)
    - `prompt_id` (string)

- `gemini_cli.edit_strategy`: ì„ íƒëœ í¸ì§‘ ì „ëµì…ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `strategy` (string)

- `gemini_cli.edit_correction`: í¸ì§‘ ìˆ˜ì • ê²°ê³¼ì…ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `correction` ("success" | "failure")

- `gen_ai.client.inference.operation.details`: ì´ ì´ë²¤íŠ¸ëŠ” [OpenTelemetry GenAI
  ì´ë²¤íŠ¸ ì˜ë¯¸ ê·œì¹™]ì— ë§ì¶° GenAI ì‘ì—…ì— ëŒ€í•œ ìì„¸í•œ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `gen_ai.request.model` (string)
    - `gen_ai.provider.name` (string)
    - `gen_ai.operation.name` (string)
    - `gen_ai.input.messages` (json string)
    - `gen_ai.output.messages` (json string)
    - `gen_ai.response.finish_reasons` (array of strings)
    - `gen_ai.usage.input_tokens` (int)
    - `gen_ai.usage.output_tokens` (int)
    - `gen_ai.request.temperature` (float)
    - `gen_ai.request.top_p` (float)
    - `gen_ai.request.top_k` (int)
    - `gen_ai.request.max_tokens` (int)
    - `gen_ai.system_instructions` (json string)
    - `server.address` (string)
    - `server.port` (int)

#### íŒŒì¼

ë„êµ¬ê°€ ìˆ˜í–‰í•œ íŒŒì¼ ì‘ì—…ì„ ì¶”ì í•©ë‹ˆë‹¤.

- `gemini_cli.file_operation`: ê° íŒŒì¼ ì‘ì—…ì— ëŒ€í•´ ë°©ì¶œë©ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `tool_name` (string)
    - `operation` ("create" | "read" | "update")
    - `lines` (int, optional)
    - `mimetype` (string, optional)
    - `extension` (string, optional)
    - `programming_language` (string, optional)

#### API

Gemini API ìš”ì²­, ì‘ë‹µ ë° ì˜¤ë¥˜ë¥¼ ìº¡ì²˜í•©ë‹ˆë‹¤.

- `gemini_cli.api_request`: Gemini APIë¡œ ì „ì†¡ëœ ìš”ì²­ì…ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `model` (string)
    - `prompt_id` (string)
    - `request_text` (string, optional)

- `gemini_cli.api_response`: Gemini APIë¡œë¶€í„° ë°›ì€ ì‘ë‹µì…ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `model` (string)
    - `status_code` (int|string)
    - `duration_ms` (int)
    - `input_token_count` (int)
    - `output_token_count` (int)
    - `cached_content_token_count` (int)
    - `thoughts_token_count` (int)
    - `tool_token_count` (int)
    - `total_token_count` (int)
    - `response_text` (string, optional)
    - `prompt_id` (string)
    - `auth_type` (string)
    - `finish_reasons` (array of strings)

- `gemini_cli.api_error`: API ìš”ì²­ì´ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.
  - **ì†ì„±**:
    - `model` (string)
    - `error` (string)
    - `error_type` (string)
    - `status_code` (int|string)
    - `duration_ms` (int)
    - `prompt_id` (string)
    - `auth_type` (string)

- `gemini_cli.malformed_json_response`: `generateJson` ì‘ë‹µì„ íŒŒì‹±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
  - **ì†ì„±**:
    - `model` (string)

#### ëª¨ë¸ ë¼ìš°íŒ…

- `gemini_cli.slash_command`: ìŠ¬ë˜ì‹œ ëª…ë ¹ì´ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.
  - **ì†ì„±**:
    - `command` (string)
    - `subcommand` (string, optional)
    - `status` ("success" | "error")

- `gemini_cli.slash_command.model`: ìŠ¬ë˜ì‹œ ëª…ë ¹ì„ í†µí•´ ëª¨ë¸ì´ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤.
  - **ì†ì„±**:
    - `model_name` (string)

- `gemini_cli.model_routing`: ëª¨ë¸ ë¼ìš°í„°ê°€ ê²°ì •ì„ ë‚´ë ¸ìŠµë‹ˆë‹¤.
  - **ì†ì„±**:
    - `decision_model` (string)
    - `decision_source` (string)
    - `routing_latency_ms` (int)
    - `reasoning` (string, optional)
    - `failed` (boolean)
    - `error_message` (string, optional)

#### ì±„íŒ… ë° ìŠ¤íŠ¸ë¦¬ë°

- `gemini_cli.chat_compression`: ì±„íŒ… ì»¨í…ìŠ¤íŠ¸ê°€ ì••ì¶•ë˜ì—ˆìŠµë‹ˆë‹¤.
  - **ì†ì„±**:
    - `tokens_before` (int)
    - `tokens_after` (int)

- `gemini_cli.chat.invalid_chunk`: ìŠ¤íŠ¸ë¦¼ì—ì„œ ì˜ëª»ëœ ì²­í¬ë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤.
  - **ì†ì„±**:
    - `error.message` (string, optional)

- `gemini_cli.chat.content_retry`: ì½˜í…ì¸  ì˜¤ë¥˜ë¡œ ì¸í•´ ì¬ì‹œë„ê°€ íŠ¸ë¦¬ê±°ë˜ì—ˆìŠµë‹ˆë‹¤.
  - **ì†ì„±**:
    - `attempt_number` (int)
    - `error_type` (string)
    - `retry_delay_ms` (int)
    - `model` (string)

- `gemini_cli.chat.content_retry_failure`: ëª¨ë“  ì½˜í…ì¸  ì¬ì‹œë„ê°€ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.
  - **ì†ì„±**:
    - `total_attempts` (int)
    - `final_error_type` (string)
    - `total_duration_ms` (int, optional)
    - `model` (string)

- `gemini_cli.conversation_finished`: ëŒ€í™” ì„¸ì…˜ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.
  - **ì†ì„±**:
    - `approvalMode` (string)
    - `turnCount` (int)

- `gemini_cli.next_speaker_check`: ë‹¤ìŒ í™”ì ê²°ì •.
  - **ì†ì„±**:
    - `prompt_id` (string)
    - `finish_reason` (string)
    - `result` (string)

#### ë³µì›ë ¥

ëª¨ë¸ ë° ë„¤íŠ¸ì›Œí¬ ì‘ì—…ì— ëŒ€í•œ ëŒ€ì²´ ë©”ì»¤ë‹ˆì¦˜ì„ ê¸°ë¡í•©ë‹ˆë‹¤.

- `gemini_cli.flash_fallback`: ëŒ€ì²´ ë°©í¸ìœ¼ë¡œ flash ëª¨ë¸ë¡œ ì „í™˜í–ˆìŠµë‹ˆë‹¤.
  - **ì†ì„±**:
    - `auth_type` (string)

- `gemini_cli.ripgrep_fallback`: íŒŒì¼ ê²€ìƒ‰ì„ ìœ„í•œ ëŒ€ì²´ ë°©í¸ìœ¼ë¡œ grepìœ¼ë¡œ ì „í™˜í–ˆìŠµë‹ˆë‹¤.
  - **ì†ì„±**:
    - `error` (string, optional)

- `gemini_cli.web_fetch_fallback_attempt`: ì›¹ ê°€ì ¸ì˜¤ê¸°(web-fetch) ëŒ€ì²´ ë°©í¸ì„
  ì‹œë„í–ˆìŠµë‹ˆë‹¤.
  - **ì†ì„±**:
    - `reason` ("private_ip" | "primary_failed")

#### í™•ì¥

í™•ì¥ ìˆ˜ëª… ì£¼ê¸° ë° ì„¤ì • ë³€ê²½ì„ ì¶”ì í•©ë‹ˆë‹¤.

- `gemini_cli.extension_install`: í™•ì¥ì´ ì„¤ì¹˜ë˜ì—ˆìŠµë‹ˆë‹¤.
  - **ì†ì„±**:
    - `extension_name` (string)
    - `extension_version` (string)
    - `extension_source` (string)
    - `status` (string)

- `gemini_cli.extension_uninstall`: í™•ì¥ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.
  - **ì†ì„±**:
    - `extension_name` (string)
    - `status` (string)

- `gemini_cli.extension_enable`: í™•ì¥ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.
  - **ì†ì„±**:
    - `extension_name` (string)
    - `setting_scope` (string)

- `gemini_cli.extension_disable`: í™•ì¥ì´ ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.
  - **ì†ì„±**:
    - `extension_name` (string)
    - `setting_scope` (string)

- `gemini_cli.extension_update`: í™•ì¥ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.
  - **ì†ì„±**:
    - `extension_name` (string)
    - `extension_version` (string)
    - `extension_previous_version` (string)
    - `extension_source` (string)
    - `status` (string)

#### ì—ì´ì „íŠ¸ ì‹¤í–‰

- `gemini_cli.agent.start`: ì—ì´ì „íŠ¸ ì‹¤í–‰ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.
  - **ì†ì„±**:
    - `agent_id` (string)
    - `agent_name` (string)

- `gemini_cli.agent.finish`: ì—ì´ì „íŠ¸ ì‹¤í–‰ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.
  - **ì†ì„±**:
    - `agent_id` (string)
    - `agent_name` (string)
    - `duration_ms` (int)
    - `turn_count` (int)
    - `terminate_reason` (string)

#### IDE

IDE ì»´íŒ¨ë‹ˆì–¸ ì—°ê²° ë° ëŒ€í™” ìˆ˜ëª… ì£¼ê¸° ì´ë²¤íŠ¸ë¥¼ ìº¡ì²˜í•©ë‹ˆë‹¤.

- `gemini_cli.ide_connection`: IDE ì»´íŒ¨ë‹ˆì–¸ ì—°ê²°.
  - **ì†ì„±**:
    - `connection_type` (string)

#### UI

í„°ë¯¸ë„ ë Œë”ë§ ë¬¸ì œ ë° ê´€ë ¨ ì‹ í˜¸ë¥¼ ì¶”ì í•©ë‹ˆë‹¤.

- `kitty_sequence_overflow`: í„°ë¯¸ë„ kitty ì œì–´ ì‹œí€€ìŠ¤ ì˜¤ë²„í”Œë¡œ.
  - **ì†ì„±**:
    - `sequence_length` (int)
    - `truncated_sequence` (string)

### ë©”íŠ¸ë¦­

ë©”íŠ¸ë¦­ì€ ì‹œê°„ì— ë”°ë¥¸ ë™ì‘ì˜ ìˆ˜ì¹˜ ì¸¡ì •ê°’ì…ë‹ˆë‹¤.

#### ì‚¬ìš©ì ì§€ì •

##### ì„¸ì…˜

ì‹œì‘ ì‹œ CLI ì„¸ì…˜ì„ ê³„ì‚°í•©ë‹ˆë‹¤.

- `gemini_cli.session.count` (Counter, Int): CLI ì‹œì‘ ë‹¹ í•œ ë²ˆì”© ì¦ê°€í•©ë‹ˆë‹¤.

##### ë„êµ¬

ë„êµ¬ ì‚¬ìš©ëŸ‰ ë° ì§€ì—° ì‹œê°„ì„ ì¸¡ì •í•©ë‹ˆë‹¤.

- `gemini_cli.tool.call.count` (Counter, Int): ë„êµ¬ í˜¸ì¶œì„ ê³„ì‚°í•©ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `function_name`
    - `success` (boolean)
    - `decision` (string: "accept", "reject", "modify", ë˜ëŠ” "auto_accept",
      í•´ë‹¹ë˜ëŠ” ê²½ìš°)
    - `tool_type` (string: "mcp" ë˜ëŠ” "native", í•´ë‹¹ë˜ëŠ” ê²½ìš°)

- `gemini_cli.tool.call.latency` (Histogram, ms): ë„êµ¬ í˜¸ì¶œ ì§€ì—° ì‹œê°„ì„
  ì¸¡ì •í•©ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `function_name`

##### API

API ìš”ì²­ ì–‘ê³¼ ì§€ì—° ì‹œê°„ì„ ì¶”ì í•©ë‹ˆë‹¤.

- `gemini_cli.api.request.count` (Counter, Int): ëª¨ë“  API ìš”ì²­ì„ ê³„ì‚°í•©ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `model`
    - `status_code`
    - `error_type` (í•´ë‹¹ë˜ëŠ” ê²½ìš°)

- `gemini_cli.api.request.latency` (Histogram, ms): API ìš”ì²­ ì§€ì—° ì‹œê°„ì„
  ì¸¡ì •í•©ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `model`
  - ì°¸ê³ : `gen_ai.client.operation.duration`(GenAI ê·œì¹™)ê³¼ ê²¹ì¹©ë‹ˆë‹¤.

##### í† í° ì‚¬ìš©ëŸ‰

ëª¨ë¸ ë° ìœ í˜•ë³„ë¡œ ì‚¬ìš©ëœ í† í°ì„ ì¶”ì í•©ë‹ˆë‹¤.

- `gemini_cli.token.usage` (Counter, Int): ì‚¬ìš©ëœ í† í°ì„ ê³„ì‚°í•©ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `model`
    - `type` ("input", "output", "thought", "cache", ë˜ëŠ” "tool")
  - ì°¸ê³ : `input`/`output`ì— ëŒ€í•´ `gen_ai.client.token.usage`ì™€ ê²¹ì¹©ë‹ˆë‹¤.

##### íŒŒì¼

ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ì™€ í•¨ê»˜ íŒŒì¼ ì‘ì—…ì„ ê³„ì‚°í•©ë‹ˆë‹¤.

- `gemini_cli.file.operation.count` (Counter, Int): íŒŒì¼ ì‘ì—…ì„ ê³„ì‚°í•©ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `operation` ("create", "read", "update")
    - `lines` (Int, optional)
    - `mimetype` (string, optional)
    - `extension` (string, optional)
    - `programming_language` (string, optional)

- `gemini_cli.lines.changed` (Counter, Int): ë³€ê²½ëœ ì¤„ ìˆ˜(íŒŒì¼ diffì—ì„œ).
  - **ì†ì„±**:
    - `function_name`
    - `type` ("added" ë˜ëŠ” "removed")

##### ì±„íŒ… ë° ìŠ¤íŠ¸ë¦¬ë°

ì••ì¶•, ì˜ëª»ëœ ì²­í¬ ë° ì¬ì‹œë„ì— ëŒ€í•œ ë³µì›ë ¥ ì¹´ìš´í„°ì…ë‹ˆë‹¤.

- `gemini_cli.chat_compression` (Counter, Int): ì±„íŒ… ì••ì¶• ì‘ì—…ì„ ê³„ì‚°í•©ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `tokens_before` (Int)
    - `tokens_after` (Int)

- `gemini_cli.chat.invalid_chunk.count` (Counter, Int): ìŠ¤íŠ¸ë¦¼ì—ì„œ ì˜ëª»ëœ ì²­í¬ë¥¼
  ê³„ì‚°í•©ë‹ˆë‹¤.

- `gemini_cli.chat.content_retry.count` (Counter, Int): ì½˜í…ì¸  ì˜¤ë¥˜ë¡œ ì¸í•œ ì¬ì‹œë„ë¥¼
  ê³„ì‚°í•©ë‹ˆë‹¤.

- `gemini_cli.chat.content_retry_failure.count` (Counter, Int): ëª¨ë“  ì½˜í…ì¸  ì¬ì‹œë„ê°€
  ì‹¤íŒ¨í•œ ìš”ì²­ì„ ê³„ì‚°í•©ë‹ˆë‹¤.

##### ëª¨ë¸ ë¼ìš°íŒ…

ë¼ìš°íŒ… ì§€ì—° ì‹œê°„/ì‹¤íŒ¨ ë° ìŠ¬ë˜ì‹œ ëª…ë ¹ ì„ íƒì…ë‹ˆë‹¤.

- `gemini_cli.slash_command.model.call_count` (Counter, Int): ìŠ¬ë˜ì‹œ ëª…ë ¹ì„ í†µí•œ
  ëª¨ë¸ ì„ íƒì„ ê³„ì‚°í•©ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `slash_command.model.model_name` (string)

- `gemini_cli.model_routing.latency` (Histogram, ms): ëª¨ë¸ ë¼ìš°íŒ… ê²°ì • ì§€ì—°
  ì‹œê°„ì…ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `routing.decision_model` (string)
    - `routing.decision_source` (string)

- `gemini_cli.model_routing.failure.count` (Counter, Int): ëª¨ë¸ ë¼ìš°íŒ… ì‹¤íŒ¨ë¥¼
  ê³„ì‚°í•©ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `routing.decision_source` (string)
    - `routing.error_message` (string)

##### ì—ì´ì „íŠ¸ ì‹¤í–‰

ì—ì´ì „íŠ¸ ìˆ˜ëª… ì£¼ê¸° ë©”íŠ¸ë¦­: ì‹¤í–‰, ê¸°ê°„ ë° í„´.

- `gemini_cli.agent.run.count` (Counter, Int): ì—ì´ì „íŠ¸ ì‹¤í–‰ì„ ê³„ì‚°í•©ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `agent_name` (string)
    - `terminate_reason` (string)

- `gemini_cli.agent.duration` (Histogram, ms): ì—ì´ì „íŠ¸ ì‹¤í–‰ ê¸°ê°„ì…ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `agent_name` (string)

- `gemini_cli.agent.turns` (Histogram, turns): ì—ì´ì „íŠ¸ ì‹¤í–‰ ë‹¹ í„´ ìˆ˜ì…ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `agent_name` (string)

##### ìŠ¹ì¸ ëª¨ë“œ

###### ì‹¤í–‰

ì´ ë©”íŠ¸ë¦­ì€ ê³„íš ëª¨ë“œì™€ ê°™ì€ íŠ¹ì • ìŠ¹ì¸ ì›Œí¬í”Œë¡œì˜ ì±„íƒ ë° ì‚¬ìš©ì„ ì¶”ì í•©ë‹ˆë‹¤.

- `gemini_cli.plan.execution.count` (Counter, Int): ê³„íš ì‹¤í–‰ì„ ê³„ì‚°í•©ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `approval_mode` (string)

##### UI

ê¹œë°•ì„ íšŸìˆ˜ì™€ ê°™ì€ UI ì•ˆì •ì„± ì‹ í˜¸ì…ë‹ˆë‹¤.

- `gemini_cli.ui.flicker.count` (Counter, Int): ê¹œë°•ì´ëŠ”(í„°ë¯¸ë„ë³´ë‹¤ ë†’ê²Œ ë Œë”ë§ëœ)
  UI í”„ë ˆì„ì„ ê³„ì‚°í•©ë‹ˆë‹¤.

##### ì„±ëŠ¥

ì‹œì‘, CPU/ë©”ëª¨ë¦¬ ë° ë‹¨ê³„ íƒ€ì´ë°ì— ëŒ€í•œ ì„ íƒì  ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ì…ë‹ˆë‹¤.

- `gemini_cli.startup.duration` (Histogram, ms): ë‹¨ê³„ë³„ CLI ì‹œì‘ ì‹œê°„ì…ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `phase` (string)
    - `details` (map, optional)

- `gemini_cli.memory.usage` (Histogram, bytes): ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì…ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `memory_type` ("heap_used", "heap_total", "external", "rss")
    - `component` (string, optional)

- `gemini_cli.cpu.usage` (Histogram, percent): CPU ì‚¬ìš©ëŸ‰ ë°±ë¶„ìœ¨ì…ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `component` (string, optional)

- `gemini_cli.tool.queue.depth` (Histogram, count): ì‹¤í–‰ ëŒ€ê¸°ì—´ì— ìˆëŠ” ë„êµ¬ ìˆ˜.

- `gemini_cli.tool.execution.breakdown` (Histogram, ms): ë‹¨ê³„ë³„ ë„êµ¬ ì‹œê°„ì…ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `function_name` (string)
    - `phase` ("validation", "preparation", "execution", "result_processing")

- `gemini_cli.api.request.breakdown` (Histogram, ms): ë‹¨ê³„ë³„ API ìš”ì²­ ì‹œê°„ì…ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `model` (string)
    - `phase` ("request_preparation", "network_latency", "response_processing",
      "token_processing")

- `gemini_cli.token.efficiency` (Histogram, ratio): í† í° íš¨ìœ¨ì„± ë©”íŠ¸ë¦­ì…ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `model` (string)
    - `metric` (string)
    - `context` (string, optional)

- `gemini_cli.performance.score` (Histogram, score): ì¢…í•© ì„±ëŠ¥ ì ìˆ˜ì…ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `category` (string)
    - `baseline` (number, optional)

- `gemini_cli.performance.regression` (Counter, Int): í‡´í–‰ ê°ì§€ ì´ë²¤íŠ¸ì…ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `metric` (string)
    - `severity` ("low", "medium", "high")
    - `current_value` (number)
    - `baseline_value` (number)

- `gemini_cli.performance.regression.percentage_change` (Histogram, percent): í‡´í–‰ì´
  ê°ì§€ë˜ì—ˆì„ ë•Œ ê¸°ì¤€ì„  ëŒ€ë¹„ ë³€í™”ìœ¨ì…ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `metric` (string)
    - `severity` ("low", "medium", "high")
    - `current_value` (number)
    - `baseline_value` (number)

- `gemini_cli.performance.baseline.comparison` (Histogram, percent): ê¸°ì¤€ì„ ê³¼ì˜
  ë¹„êµì…ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `metric` (string)
    - `category` (string)
    - `current_value` (number)
    - `baseline_value` (number)

#### GenAI ì˜ë¯¸ ê·œì¹™

ë‹¤ìŒ ë©”íŠ¸ë¦­ì€ GenAI ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ë°˜ì˜ í‘œì¤€í™”ëœ ê´€ì°° ê°€ëŠ¥ì„±ì„ ìœ„í•´ [OpenTelemetry
GenAI ì˜ë¯¸ ê·œì¹™]ì„ ì¤€ìˆ˜í•©ë‹ˆë‹¤:

- `gen_ai.client.token.usage` (Histogram, token): ì‘ì—… ë‹¹ ì‚¬ìš©ëœ ì…ë ¥ ë° ì¶œë ¥ í† í°
  ìˆ˜ì…ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `gen_ai.operation.name` (string): ì‘ì—… ìœ í˜• (ì˜ˆ: "generate_content",
      "chat")
    - `gen_ai.provider.name` (string): GenAI ê³µê¸‰ì ("gcp.gen_ai" ë˜ëŠ”
      "gcp.vertex_ai")
    - `gen_ai.token.type` (string): í† í° ìœ í˜• ("input" ë˜ëŠ” "output")
    - `gen_ai.request.model` (string, optional): ìš”ì²­ì— ì‚¬ìš©ëœ ëª¨ë¸ ì´ë¦„
    - `gen_ai.response.model` (string, optional): ì‘ë‹µì„ ìƒì„±í•œ ëª¨ë¸ ì´ë¦„
    - `server.address` (string, optional): GenAI ì„œë²„ ì£¼ì†Œ
    - `server.port` (int, optional): GenAI ì„œë²„ í¬íŠ¸

- `gen_ai.client.operation.duration` (Histogram, s): ì´ˆ ë‹¨ìœ„ì˜ GenAI ì‘ì—…
  ê¸°ê°„ì…ë‹ˆë‹¤.
  - **ì†ì„±**:
    - `gen_ai.operation.name` (string): ì‘ì—… ìœ í˜• (ì˜ˆ: "generate_content",
      "chat")
    - `gen_ai.provider.name` (string): GenAI ê³µê¸‰ì ("gcp.gen_ai" ë˜ëŠ”
      "gcp.vertex_ai")
    - `gen_ai.request.model` (string, optional): ìš”ì²­ì— ì‚¬ìš©ëœ ëª¨ë¸ ì´ë¦„
    - `gen_ai.response.model` (string, optional): ì‘ë‹µì„ ìƒì„±í•œ ëª¨ë¸ ì´ë¦„
    - `server.address` (string, optional): GenAI ì„œë²„ ì£¼ì†Œ
    - `server.port` (int, optional): GenAI ì„œë²„ í¬íŠ¸
    - `error.type` (string, optional): ì‘ì—…ì´ ì‹¤íŒ¨í•œ ê²½ìš° ì˜¤ë¥˜ ìœ í˜•

[OpenTelemetry GenAI ì˜ë¯¸ ê·œì¹™]: https://github.com/open-telemetry/semantic-conventions/blob/main/docs/gen-ai/gen-ai-metrics.md
[OpenTelemetry GenAI ì´ë²¤íŠ¸ ì˜ë¯¸ ê·œì¹™]: https://github.com/open-telemetry/semantic-conventions/blob/8b4f210f43136e57c1f6f47292eb6d38e3bf30bb/docs/gen-ai/gen-ai-events.md
